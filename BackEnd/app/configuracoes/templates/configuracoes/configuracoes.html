{% load static %}

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <link rel="shortcut icon" href="{% static 'competicoes/img/icone_keychart.png' %}" type="image/x-icon">
    <link rel="stylesheet" href="{% static 'configuracoes/css/configuracoes.css' %}">
    <title>Configurações | KeyChart</title>
</head>
<body>

    {% include 'sidebar.html' %}

    <div class="content" id="content">
        <div class="header">
            <h2><i class="bi bi-gear-fill"></i> Configurações do Sistema</h2>
        </div>

        <div class="container-fluid">
            <!-- Menu de Abas Horizontal -->
            <div class="filter-tabs mb-4">
                <ul class="nav nav-tabs justify-content-center" id="configTabs">
                    <li class="nav-item">
                        <a class="nav-link active" href="#geral" data-bs-toggle="tab">
                            <i class="bi bi-sliders"></i> Gerais
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#aparencia" data-bs-toggle="tab">
                            <i class="bi bi-palette"></i> Aparência
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#notificacoes" data-bs-toggle="tab">
                            <i class="bi bi-bell"></i> Notificações
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#backup" data-bs-toggle="tab">
                            <i class="bi bi-cloud-arrow-up"></i> Backup
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#usuarios" data-bs-toggle="tab">
                            <i class="bi bi-people"></i> Usuários
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#integracao" data-bs-toggle="tab">
                            <i class="bi bi-plug"></i> Integrações
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#sobre" data-bs-toggle="tab">
                            <i class="bi bi-info-circle"></i> Sobre
                        </a>
                    </li>
                </ul>
            </div>
            <div class="tab-content">
                <!-- Configurações Gerais -->
                <div class="tab-pane fade show active" id="geral">
                    <div class="card">
                        <div class="card-header">
                            <i class="bi bi-sliders"></i> Configurações Gerais do Sistema
                        </div>
                        <div class="card-body">
                            <form>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="nomeSistema" class="form-label">Nome do Sistema</label>
                                        <input type="text" class="form-control" id="nomeSistema" value="KeyChart">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="timezone" class="form-label">Fuso Horário</label>
                                        <select class="form-select" id="timezone">
                                            <option selected>America/Sao_Paulo</option>
                                            <option>America/New_York</option>
                                            <option>Europe/London</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="idioma" class="form-label">Idioma</label>
                                        <select class="form-select" id="idioma">
                                            <option selected>Português (Brasil)</option>
                                            <option>English</option>
                                            <option>Español</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="formatoData" class="form-label">Formato de Data</label>
                                        <select class="form-select" id="formatoData">
                                            <option selected>DD/MM/YYYY</option>
                                            <option>MM/DD/YYYY</option>
                                            <option>YYYY-MM-DD</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="manutencao" class="form-label">Modo Manutenção</label>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="manutencao">
                                        <label class="form-check-label" for="manutencao">Ativar modo manutenção</label>
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-primary">
                                    <i class="bi bi-save"></i> Salvar Configurações
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Aparência -->
                <div class="tab-pane fade" id="aparencia">
                    <div class="card">
                        <div class="card-header">
                            <i class="bi bi-palette"></i> Personalização da Aparência
                        </div>
                        <div class="card-body">
                            <form>
                                <div class="row mb-4">
                                    <div class="col-md-6">
                                        <label class="form-label">Logo do Sistema</label>
                                        <div class="mb-3">
                                            <img src="img/image.png" alt="Logo atual" class="logo-preview mb-2" id="logoPreview">
                                            <input type="file" class="form-control" id="uploadLogo" accept="image/*">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Favicon</label>
                                        <div class="mb-3">
                                            <img src="img/image.png" alt="Favicon atual" class="logo-preview mb-2" style="width: 32px; height: 32px;">
                                            <input type="file" class="form-control" id="uploadFavicon" accept="image/*">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <label class="form-label">Tema de Cores</label>
                                    <div class="d-flex">
                                        <div class="theme-color selected" style="background-color: #146c43;" title="Verde padrão"></div>
                                        <div class="theme-color" style="background-color: #0d6efd;" title="Azul"></div>
                                        <div class="theme-color" style="background-color: #6610f2;" title="Roxo"></div>
                                        <div class="theme-color" style="background-color: #d63384;" title="Rosa"></div>
                                        <div class="theme-color" style="background-color: #dc3545;" title="Vermelho"></div>
                                        <div class="theme-color" style="background-color: #fd7e14;" title="Laranja"></div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="temaEscuro" class="form-label">Modo Escuro</label>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="temaEscuro">
                                        <label class="form-check-label" for="temaEscuro">Ativar modo escuro</label>
                                    </div>
                                </div>
                                
                                <button type="submit" class="btn btn-primary">
                                    <i class="bi bi-save"></i> Aplicar Aparência
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Notificações -->
                <div class="tab-pane fade" id="notificacoes">
                    <div class="card">
                        <div class="card-header">
                            <i class="bi bi-bell"></i> Configurações de Notificações
                        </div>
                        <div class="card-body">
                            <form>
                                <div class="mb-3">
                                    <label class="form-label">Notificações por Email</label>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="emailResultados" checked>
                                        <label class="form-check-label" for="emailResultados">Resultados de competições</label>
                                    </div>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="emailLembretes" checked>
                                        <label class="form-check-label" for="emailLembretes">Lembretes de eventos</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="emailAtualizacoes">
                                        <label class="form-check-label" for="emailAtualizacoes">Atualizações do sistema</label>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">Notificações no Sistema</label>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="notifNovosAtletas" checked>
                                        <label class="form-check-label" for="notifNovosAtletas">Novos atletas cadastrados</label>
                                    </div>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="notifPartidas" checked>
                                        <label class="form-check-label" for="notifPartidas">Próximas partidas</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="notifSistema" checked>
                                        <label class="form-check-label" for="notifSistema">Alertas do sistema</label>
                                    </div>
                                </div>
                                
                                <button type="submit" class="btn btn-primary">
                                    <i class="bi bi-save"></i> Salvar Configurações
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Backup e Restauração -->
                <div class="tab-pane fade" id="backup">
                    <div class="card">
                        <div class="card-header">
                            <i class="bi bi-cloud-arrow-up"></i> Backup e Restauração
                        </div>
                        <div class="card-body">
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <div class="settings-section">
                                        <h5 class="settings-title">Criar Backup</h5>
                                        <p>Crie um backup completo do sistema incluindo todos os dados.</p>
                                        <button class="btn btn-primary">
                                            <i class="bi bi-download"></i> Criar Backup Agora
                                        </button>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="settings-section">
                                        <h5 class="settings-title">Restaurar Backup</h5>
                                        <div class="mb-3">
                                            <input type="file" class="form-control" id="arquivoBackup">
                                        </div>
                                        <button class="btn btn-primary">
                                            <i class="bi bi-upload"></i> Restaurar Backup
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="settings-section">
                                <h5 class="settings-title">Backups Automáticos</h5>
                                <div class="form-check form-switch mb-3">
                                    <input class="form-check-input" type="checkbox" id="backupAuto" checked>
                                    <label class="form-check-label" for="backupAuto">Ativar backups automáticos</label>
                                </div>
                                <div class="row">
                                    <div class="col-md-4">
                                        <label for="freqBackup" class="form-label">Frequência</label>
                                        <select class="form-select" id="freqBackup">
                                            <option>Diariamente</option>
                                            <option selected>Semanalmente</option>
                                            <option>Mensalmente</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="horaBackup" class="form-label">Hora</label>
                                        <input type="time" class="form-control" id="horaBackup" value="02:00">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="manterBackup" class="form-label">Manter por</label>
                                        <select class="form-select" id="manterBackup">
                                            <option>1 semana</option>
                                            <option selected>1 mês</option>
                                            <option>3 meses</option>
                                            <option>6 meses</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="settings-section">
                                <h5 class="settings-title">Backups Existentes</h5>
                                <div class="backup-list">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Data</th>
                                                <th>Tamanho</th>
                                                <th>Ações</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>2023-11-15 02:00</td>
                                                <td>45 MB</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary">
                                                        <i class="bi bi-download"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-danger">
                                                        <i class="bi bi-trash"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>2023-11-08 02:00</td>
                                                <td>42 MB</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary">
                                                        <i class="bi bi-download"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-danger">
                                                        <i class="bi bi-trash"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Usuários e Permissões -->
                <div class="tab-pane fade" id="usuarios">
                    <div class="card">
                        <div class="card-header">
                            <i class="bi bi-people"></i> Gerenciamento de Usuários
                        </div>
                        <div class="card-body">
                            <div class="mb-4">
                                <form method="post" class="row g-3">
                                    {% csrf_token %}
                                    <input type="hidden" name="add_user" value="1">
                                    <div class="col-md-3">
                                        <input type="text" name="nome" class="form-control" placeholder="Nome" required>
                                    </div>
                                    <div class="col-md-3">
                                        <input type="email" name="email" class="form-control" placeholder="Email" required>
                                    </div>
                                    <div class="col-md-3">
                                        <input type="password" name="senha" class="form-control" placeholder="Senha" required>
                                    </div>
                                    <div class="col-md-2">
                                        <select name="perfil" class="form-select" required>
                                            <option value="Administrador">Administrador</option>
                                            <option value="Organizador">Organizador</option>
                                            <option value="Juiz">Juiz</option>
                                            <option value="Visualizador">Visualizador</option>
                                        </select>
                                    </div>
                                    <div class="col-md-1">
                                        <button type="submit" class="btn btn-success w-100 btn-criar-usuario"><i class="bi bi-plus-circle"></i></button>
                                    </div>
                                </form>
                            </div>
                            {% if messages %}
                                {% for message in messages %}
                                    <div class="alert alert-{{ message.tags }}">{{ message }}</div>
                                {% endfor %}
                            {% endif %}
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Nome</th>
                                        <th>Email</th>
                                        <th>Perfil</th>
                                        <th>Status</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for usuario in usuarios %}
                                    <tr>
                                        <td>{{ usuario.first_name }}</td>
                                        <td>{{ usuario.email }}</td>
                                        <td>Administrador</td>
                                        <td>
                                            {% if usuario.is_active %}
                                                <span class="badge bg-success">Ativo</span>
                                            {% else %}
                                                <span class="badge bg-warning text-dark">Inativo</span>
                                            {% endif %}
                                        </td>
                                        <td>
                                            <div class="btn-group" role="group">
                                                <button class="btn btn-sm btn-outline-primary btn-editar-usuario" data-bs-toggle="modal" data-bs-target="#editarUsuarioModal{{ usuario.id }}" title="Editar">
                                                    <i class="bi bi-pencil"></i>
                                                </button>
                                                <form method="post" style="display:inline;" onsubmit="return confirm('Tem certeza que deseja excluir este usuário?');">
                                                    {% csrf_token %}
                                                    <input type="hidden" name="delete_user" value="{{ usuario.id }}">
                                                    <button type="submit" class="btn btn-sm btn-outline-danger btn-excluir-usuario" title="Excluir">
                                                        <i class="bi bi-trash"></i>
                                                    </button>
                                                </form>
                                                {% if usuario.is_active %}
                                                    <form method="post" style="display:inline;">
                                                        {% csrf_token %}
                                                        <input type="hidden" name="toggle_user" value="{{ usuario.id }}">
                                                        <button type="submit" class="btn btn-sm btn-outline-warning" title="Desativar">
                                                            <i class="bi bi-person-x"></i>
                                                        </button>
                                                    </form>
                                                {% else %}
                                                    <form method="post" style="display:inline;">
                                                        {% csrf_token %}
                                                        <input type="hidden" name="toggle_user" value="{{ usuario.id }}">
                                                        <button type="submit" class="btn btn-sm btn-outline-success" title="Ativar">
                                                            <i class="bi bi-person-check"></i>
                                                        </button>
                                                    </form>
                                                {% endif %}
                                            </div>
                                            <!-- Modal de edição -->
                                            <div class="modal fade" id="editarUsuarioModal{{ usuario.id }}" tabindex="-1" aria-labelledby="editarUsuarioModalLabel{{ usuario.id }}" aria-hidden="true">
                                                <div class="modal-dialog">
                                                    <div class="modal-content">
                                                        <form method="post">
                                                            {% csrf_token %}
                                                            <input type="hidden" name="edit_user" value="{{ usuario.id }}">
                                                            <div class="modal-header">
                                                                <h5 class="modal-title" id="editarUsuarioModalLabel{{ usuario.id }}">Editar Usuário</h5>
                                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <div class="mb-3">
                                                                    <label class="form-label">Nome</label>
                                                                    <input type="text" name="nome" class="form-control" value="{{ usuario.first_name }}" required>
                                                                </div>
                                                                <div class="mb-3">
                                                                    <label class="form-label">Email</label>
                                                                    <input type="email" name="email" class="form-control" value="{{ usuario.email }}" required>
                                                                </div>
                                                                <div class="mb-3">
                                                                    <label class="form-label">Nova Senha</label>
                                                                    <input type="password" name="senha" class="form-control" placeholder="Deixe em branco para não alterar">
                                                                </div>
                                                                <div class="mb-3">
                                                                    <label class="form-label">Perfil</label>
                                                                    <select name="perfil" class="form-select" required>
                                                                        <option value="Administrador">Administrador</option>
                                                                        <option value="Organizador">Organizador</option>
                                                                        <option value="Juiz">Juiz</option>
                                                                        <option value="Visualizador">Visualizador</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                                                                <button type="submit" class="btn btn-primary">Salvar</button>
                                                            </div>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Integrações -->
                <div class="tab-pane fade" id="integracao">
                    <div class="card">
                        <div class="card-header">
                            <i class="bi bi-plug"></i> Integrações com Outros Sistemas
                        </div>
                        <div class="card-body">
                            <div class="settings-section">
                                <h5 class="settings-title">API do Sistema</h5>
                                <div class="mb-3">
                                    <label class="form-label">Chave da API</label>
                                    <div class="input-group mb-3">
                                        <input type="text" class="form-control" value="sk_test_51Hx8..." readonly>
                                        <button class="btn btn-outline-secondary" type="button" id="copiarApiKey">
                                            <i class="bi bi-clipboard"></i> Copiar
                                        </button>
                                        <button class="btn btn-outline-secondary" type="button" id="gerarNovaApiKey">
                                            <i class="bi bi-arrow-repeat"></i> Gerar Nova
                                        </button>
                                    </div>
                                    <small class="text-muted">Use esta chave para integrar com outros sistemas.</small>
                                </div>
                            </div>
                            
                            <div class="settings-section">
                                <h5 class="settings-title">Serviços Externos</h5>
                                <div class="mb-3">
                                    <div class="card mb-3">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div>
                                                    <h6>Google Calendar</h6>
                                                    <p class="mb-0">Sincronize eventos e competições com o Google Calendar</p>
                                                </div>
                                                <div class="form-check form-switch">
                                                    <input class="form-check-input" type="checkbox" id="googleCalendar">
                                                    <label class="form-check-label" for="googleCalendar"></label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="card mb-3">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div>
                                                    <h6>Mailchimp</h6>
                                                    <p class="mb-0">Envie newsletters e comunicações por email</p>
                                                </div>
                                                <div class="form-check form-switch">
                                                    <input class="form-check-input" type="checkbox" id="mailchimp">
                                                    <label class="form-check-label" for="mailchimp"></label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div>
                                                    <h6>Pagamentos Online</h6>
                                                    <p class="mb-0">Integração com Mercado Pago para inscrições</p>
                                                </div>
                                                <div class="form-check form-switch">
                                                    <input class="form-check-input" type="checkbox" id="mercadoPago">
                                                    <label class="form-check-label" for="mercadoPago"></label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sobre o Sistema -->
                <div class="tab-pane fade" id="sobre">
                    <div class="card">
                        <div class="card-header">
                            <i class="bi bi-info-circle"></i> Informações do Sistema
                        </div>
                        <div class="card-body">
                            <div class="text-center mb-4">
                                <img src="img/image.png" alt="Logo KeyChart" style="height: 80px;">
                                <h3 class="mt-3">KeyChart</h3>
                                <p class="text-muted">Sistema de Gerenciamento de Competições Esportivas</p>
                            </div>
                            
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <div class="card mb-3">
                                        <div class="card-header">
                                            Versão
                                        </div>
                                        <div class="card-body">
                                            <p><strong>Versão atual:</strong> 2.1.0</p>
                                            <p><strong>Última atualização:</strong> 15/11/2023</p>
                                            <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#verificarAtualizacoesModal">
                                                <i class="bi bi-credit-card"></i> Renovar Licença
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card mb-3">
                                        <div class="card-header">
                                            Licença
                                        </div>
                                        <div class="card-body">
                                            <p><strong>Tipo:</strong> Licença Anual</p>
                                            <p><strong>Expira em:</strong> 15/11/2024</p>
                                            <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#renovarLicencaModal">
                                                <i class="bi bi-credit-card"></i> Renovar Licença
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card mb-3">
                                <div class="card-header">
                                    Suporte
                                </div>
                                <div class="card-body">
                                    <p><i class="bi bi-envelope"></i> <strong>Email:</strong> suporte@keychart.com</p>
                                    <p><i class="bi bi-telephone"></i> <strong>Telefone:</strong> (11) 1234-5678</p>
                                    <p><i class="bi bi-clock"></i> <strong>Horário de atendimento:</strong> Seg-Sex, 9h-18h</p>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">
                                    Desenvolvedores
                                </div>
                                <div class="card-body">
                                    <p>Sistema desenvolvido por <strong>KeyChart Solutions</strong></p>
                                    
                                    <div class="row mt-4">
                                        <!-- Desenvolvedor 1 -->
                                        <div class="col-md-3 col-sm-6 text-center mb-4">
                                            <img src="img/homem.png" alt="Foto Desenvolvedor 1" class="img-fluid rounded-circle mb-3" style="width: 120px; height: 120px; object-fit: cover;">
                                            <h5>Rafael Góes</h5>
                                            <p class="text-muted">Full Stack Developer</p>
                                            <p class="small">Especialista em JavaScript e arquitetura de sistemas.</p>
                                            <div class="social-links">
                                                <a href="https://linkedin.com/in/joaosilva" target="_blank" class="text-primary mx-1"><i class="fab fa-linkedin"></i></a>
                                                <a href="https://github.com/joaosilva" target="_blank" class="text-dark mx-1"><i class="fab fa-github"></i></a>
                                                <a href="https://instagram.com/joaosilva.dev" target="_blank" class="text-danger mx-1"><i class="fab fa-instagram"></i></a>
                                            </div>
                                        </div>
                                        
                                        <!-- Desenvolvedor 2 -->
                                        <div class="col-md-3 col-sm-6 text-center mb-4">
                                            <img src="img/homem.png" alt="Foto Desenvolvedor 2" class="img-fluid rounded-circle mb-3" style="width: 120px; height: 120px; object-fit: cover;">
                                            <h5>Rafael Góes</h5>
                                            <p class="text-muted">Frontend Specialist</p>
                                            <p class="small">Expert em React e design de interfaces responsivas.</p>
                                            <div class="social-links">
                                                <a href="https://linkedin.com/in/mariasouza" target="_blank" class="text-primary mx-1"><i class="fab fa-linkedin"></i></a>
                                                <a href="https://github.com/mariasouza" target="_blank" class="text-dark mx-1"><i class="fab fa-github"></i></a>
                                                <a href="https://instagram.com/mariasouza.dev" target="_blank" class="text-danger mx-1"><i class="fab fa-instagram"></i></a>
                                            </div>
                                        </div>
                                        
                                        <!-- Desenvolvedor 3 -->
                                        <div class="col-md-3 col-sm-6 text-center mb-4">
                                            <img src="img/homem.png" alt="Foto Desenvolvedor 3" class="img-fluid rounded-circle mb-3" style="width: 120px; height: 120px; object-fit: cover;">
                                            <h5>Rafael Góes</h5>
                                            <p class="text-muted">Backend Engineer</p>
                                            <p class="small">Focado em Node.js e arquitetura de bancos de dados.</p>
                                            <div class="social-links">
                                                <a href="https://linkedin.com/in/carlosoliveira" target="_blank" class="text-primary mx-1"><i class="fab fa-linkedin"></i></a>
                                                <a href="https://github.com/carlosoliveira" target="_blank" class="text-dark mx-1"><i class="fab fa-github"></i></a>
                                                <a href="https://instagram.com/carlos.dev" target="_blank" class="text-danger mx-1"><i class="fab fa-instagram"></i></a>
                                            </div>
                                        </div>
                                        
                                        <!-- Desenvolvedor 4 -->
                                        <div class="col-md-3 col-sm-6 text-center mb-4">
                                            <img src="img/homem.png" alt="Foto Desenvolvedor 4" class="img-fluid rounded-circle mb-3" style="width: 120px; height: 120px; object-fit: cover;">
                                            <h5>Rafael Góes</h5>
                                            <p class="text-muted">UX/UI Designer</p>
                                            <p class="small">Especialista em experiência do usuário e design thinking.</p>
                                            <div class="social-links">
                                                <a href="https://linkedin.com/in/anapereira" target="_blank" class="text-primary mx-1"><i class="fab fa-linkedin"></i></a>
                                                <a href="https://github.com/anapereira" target="_blank" class="text-dark mx-1"><i class="fab fa-github"></i></a>
                                                <a href="https://instagram.com/ana.design" target="_blank" class="text-danger mx-1"><i class="fab fa-instagram"></i></a>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <p class="mt-3">&copy; 2025 Todos os direitos reservados</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Renovação de Licença -->
    <div class="modal fade" id="renovarLicencaModal" tabindex="-1" aria-labelledby="renovarLicencaModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="renovarLicencaModalLabel">
                        <i class="bi bi-credit-card"></i> Renovar Licença
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header bg-success text-white">
                                    <h5 class="mb-0">Licença Atual</h5>
                                </div>
                                <div class="card-body">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            Tipo de Licença
                                            <span class="badge bg-primary">Anual</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            Data de Ativação
                                            <span>15/11/2022</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            Data de Expiração
                                            <span class="badge bg-danger">15/11/2023</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            Dias Restantes
                                            <span class="badge bg-warning text-dark">5 dias</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header bg-info text-white">
                                    <h5 class="mb-0">Opções de Renovação</h5>
                                </div>
                                <div class="card-body">
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="radio" name="tipoLicenca" id="licencaAnual" checked>
                                        <label class="form-check-label d-flex justify-content-between" for="licencaAnual">
                                            <span>
                                                <strong>Licença Anual</strong><br>
                                                <small class="text-muted">Renovação por 12 meses</small>
                                            </span>
                                            <span class="text-success">R$ 1.200,00</span>
                                        </label>
                                    </div>
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="radio" name="tipoLicenca" id="licencaBienal">
                                        <label class="form-check-label d-flex justify-content-between" for="licencaBienal">
                                            <span>
                                                <strong>Licença Bienal</strong><br>
                                                <small class="text-muted">Renovação por 24 meses (15% de desconto)</small>
                                            </span>
                                            <span class="text-success">R$ 2.040,00</span>
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="tipoLicenca" id="licencaPerpetua">
                                        <label class="form-check-label d-flex justify-content-between" for="licencaPerpetua">
                                            <span>
                                                <strong>Licença Perpétua</strong><br>
                                                <small class="text-muted">Acesso vitalício (economize 50%)</small>
                                            </span>
                                            <span class="text-success">R$ 3.000,00</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card mt-4">
                        <div class="card-header bg-secondary text-white">
                            <h5 class="mb-0">Informações de Pagamento</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <label for="nomeCartao" class="form-label">Nome no Cartão</label>
                                <input type="text" class="form-control" id="nomeCartao" placeholder="Como impresso no cartão">
                            </div>
                            <div class="mb-3">
                                <label for="numeroCartao" class="form-label">Número do Cartão</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" id="numeroCartao" placeholder="1234 5678 9012 3456">
                                    <span class="input-group-text"><i class="bi bi-credit-card"></i></span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="validadeCartao" class="form-label">Validade</label>
                                    <input type="text" class="form-control" id="validadeCartao" placeholder="MM/AA">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="cvvCartao" class="form-label">CVV</label>
                                    <input type="text" class="form-control" id="cvvCartao" placeholder="123">
                                </div>
                            </div>
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="salvarCartao">
                                <label class="form-check-label" for="salvarCartao">Salvar informações do cartão para pagamentos futuros</label>
                            </div>
                            <div class="alert alert-info">
                                <i class="bi bi-lock-fill"></i> Todas as transações são seguras e criptografadas.
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-success" id="btnFinalizarRenovacao">
                        <i class="bi bi-check-circle"></i> Finalizar Renovação
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Verificar Atualizações -->
    <div class="modal fade" id="verificarAtualizacoesModal" tabindex="-1" aria-labelledby="verificarAtualizacoesModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="verificarAtualizacoesModalLabel">
                        <i class="bi bi-arrow-down-circle"></i> Verificar Atualizações
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-4">
                        <i class="bi bi-cloud-arrow-down" style="font-size: 3rem; color: #0d6efd;"></i>
                        <h4>Verificando atualizações disponíveis...</h4>
                    </div>
                    
                    <div id="atualizacaoStatus">
                        <div class="d-flex justify-content-center mb-3">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Carregando...</span>
                            </div>
                        </div>
                        <p class="text-center">Conectando ao servidor de atualizações...</p>
                    </div>
                    
                    <div id="atualizacaoDisponivel" style="display: none;">
                        <div class="alert alert-success">
                            <i class="bi bi-check-circle-fill"></i> Nova versão disponível!
                        </div>
                        <div class="card mb-3">
                            <div class="card-header">
                                Detalhes da Atualização
                            </div>
                            <div class="card-body">
                                <h5>KeyChart v2.2.0</h5>
                                <p class="text-muted">Lançado em: 20/11/2023</p>
                                <ul>
                                    <li>Novo sistema de gerenciamento de torneios</li>
                                    <li>Integração com redes sociais aprimorada</li>
                                    <li>Correções de segurança importantes</li>
                                    <li>Melhorias na performance do sistema</li>
                                </ul>
                                <div class="alert alert-warning">
                                    <i class="bi bi-exclamation-triangle-fill"></i> <strong>Tamanho da atualização:</strong> 45 MB
                                </div>
                            </div>
                        </div>
                        <div class="d-grid gap-2">
                            <button class="btn btn-primary" id="btnBaixarAtualizacao">
                                <i class="bi bi-download"></i> Baixar e Instalar Atualização
                            </button>
                        </div>
                    </div>
                    
                    <div id="semAtualizacao" style="display: none;">
                        <div class="alert alert-info">
                            <i class="bi bi-info-circle-fill"></i> Seu sistema já está atualizado com a versão mais recente.
                        </div>
                        <div class="card">
                            <div class="card-header">
                                Informações da Versão Atual
                            </div>
                            <div class="card-body">
                                <h5>KeyChart v2.1.0</h5>
                                <p class="text-muted">Instalado em: 15/11/2023</p>
                                <p>Esta é a versão mais recente disponível. Por favor, verifique novamente em algumas semanas para novas atualizações.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de autenticação master -->
    <div class="modal fade" id="masterAuthModal" tabindex="-1" aria-labelledby="masterAuthModalLabel" aria-modal="true" role="dialog">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <form method="post" class="p-3">
                    {% csrf_token %}
                    <input type="hidden" name="master_auth" value="1">
                    <div class="modal-header">
                        <h5 class="modal-title" id="masterAuthModalLabel">Autenticação de Chefe do Sistema</h5>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="masterSenha" class="form-label">Digite a senha master para editar usuários:</label>
                            <input type="password" name="master_senha" id="masterSenha" class="form-control" required autofocus>
                        </div>
                        {% if messages %}
                            {% for message in messages %}
                                <div class="alert alert-{{ message.tags }}">{{ message }}</div>
                            {% endfor %}
                        {% endif %}
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">Autenticar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal de Verificação de Código -->
    <div class="modal fade" id="verificacaoCodigoModal" tabindex="-1" aria-labelledby="verificacaoCodigoModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <form method="post" id="formVerificacaoCodigo">
            {% csrf_token %}
            <input type="hidden" name="verificar_codigo" value="1">
            <div class="modal-header">
              <h5 class="modal-title" id="verificacaoCodigoModalLabel">Verificação de Código</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar" id="btnFecharCodigo"></button>
            </div>
            <div class="modal-body">
              <p>Digite o código de verificação que foi enviado para o e-mail do usuário:</p>
              <input type="text" name="codigo_verificacao" class="form-control mb-3" placeholder="Código de verificação" required>
              {% if messages %}
                {% for message in messages %}
                  {% if message.tags == 'error' %}
                    <div class="alert alert-danger">{{ message }}</div>
                  {% endif %}
                {% endfor %}
              {% endif %}
              <div id="verificacaoCodigoMensagem"></div>
            </div>
            <div class="modal-footer">
              <button type="submit" class="btn btn-primary">Verificar</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'configuracoes/js/configuracoes.js' %}"></script>
    <script>
    // Passa o status de autenticação master para o JS
    var masterAuthenticated = "{{ request.session.master_authenticated|yesno:'true,false' }}";
    // Função para abrir o modal master quando necessário
    function solicitarMasterAuth(event) {
        if (masterAuthenticated !== "true") {
            event.preventDefault();
            var modal = new bootstrap.Modal(document.getElementById('masterAuthModal'));
            modal.show();
        }
    }
    // Adicione a função aos botões de criar, editar e excluir usuário
    document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.btn-criar-usuario, .btn-editar-usuario, .btn-excluir-usuario').forEach(function(btn) {
            btn.addEventListener('click', solicitarMasterAuth);
        });
    });
    // Exibe o modal de verificação após criar usuário ou erro de código
    function abrirModalVerificacao() {
      var modal = new bootstrap.Modal(document.getElementById('verificacaoCodigoModal'));
      modal.show();
    }
    window.addEventListener('DOMContentLoaded', function() {
      const msgs = document.querySelectorAll('.alert-success, .alert-danger');
      let erroCodigo = false;
      msgs.forEach(function(msg) {
        if (msg.textContent.includes('Usuário criado!')) {
          abrirModalVerificacao();
        }
        if (msg.textContent.includes('Código de verificação incorreto') || msg.textContent.includes('Nenhum usuário pendente de verificação') || msg.textContent.includes('Código de verificação não encontrado')) {
          erroCodigo = true;
        }
      });
      if (erroCodigo) {
        abrirModalVerificacao();
      }
    });
    // Permite abrir o modal manualmente pelo menu de usuários
    document.addEventListener('DOMContentLoaded', function() {
      var btnAbrirCodigo = document.createElement('button');
      btnAbrirCodigo.textContent = 'Verificar Código';
      btnAbrirCodigo.className = 'btn btn-outline-primary btn-sm ms-2';
      btnAbrirCodigo.onclick = abrirModalVerificacao;
      var usuariosCard = document.querySelector('#usuarios .card-header');
      if (usuariosCard) {
        usuariosCard.appendChild(btnAbrirCodigo);
      }
    });
    // Impede fechar o modal de verificação pelo backdrop ou ESC
    document.addEventListener('DOMContentLoaded', function() {
      var modalEl = document.getElementById('verificacaoCodigoModal');
      if (modalEl) {
        modalEl.addEventListener('show.bs.modal', function (event) {
          modalEl.setAttribute('data-bs-backdrop', 'static');
          modalEl.setAttribute('data-bs-keyboard', 'false');
        });
      }
    });
    </script>
</body>
</html>